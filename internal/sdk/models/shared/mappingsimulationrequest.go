// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/epilot-dev/terraform-provider-epilot-erp-integration/internal/sdk/internal/utils"
)

type MappingConfigurationType string

const (
	MappingConfigurationTypeIntegrationConfigurationV1 MappingConfigurationType = "IntegrationConfigurationV1"
	MappingConfigurationTypeIntegrationConfigurationV2 MappingConfigurationType = "IntegrationConfigurationV2"
)

type MappingConfiguration struct {
	IntegrationConfigurationV1 *IntegrationConfigurationV1 `queryParam:"inline" name:"mapping_configuration"`
	IntegrationConfigurationV2 *IntegrationConfigurationV2 `queryParam:"inline" name:"mapping_configuration"`

	Type MappingConfigurationType
}

func CreateMappingConfigurationIntegrationConfigurationV1(integrationConfigurationV1 IntegrationConfigurationV1) MappingConfiguration {
	typ := MappingConfigurationTypeIntegrationConfigurationV1

	return MappingConfiguration{
		IntegrationConfigurationV1: &integrationConfigurationV1,
		Type:                       typ,
	}
}

func CreateMappingConfigurationIntegrationConfigurationV2(integrationConfigurationV2 IntegrationConfigurationV2) MappingConfiguration {
	typ := MappingConfigurationTypeIntegrationConfigurationV2

	return MappingConfiguration{
		IntegrationConfigurationV2: &integrationConfigurationV2,
		Type:                       typ,
	}
}

func (u *MappingConfiguration) UnmarshalJSON(data []byte) error {

	var integrationConfigurationV2 IntegrationConfigurationV2 = IntegrationConfigurationV2{}
	if err := utils.UnmarshalJSON(data, &integrationConfigurationV2, "", true, nil); err == nil {
		u.IntegrationConfigurationV2 = &integrationConfigurationV2
		u.Type = MappingConfigurationTypeIntegrationConfigurationV2
		return nil
	}

	var integrationConfigurationV1 IntegrationConfigurationV1 = IntegrationConfigurationV1{}
	if err := utils.UnmarshalJSON(data, &integrationConfigurationV1, "", true, nil); err == nil {
		u.IntegrationConfigurationV1 = &integrationConfigurationV1
		u.Type = MappingConfigurationTypeIntegrationConfigurationV1
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for MappingConfiguration", string(data))
}

func (u MappingConfiguration) MarshalJSON() ([]byte, error) {
	if u.IntegrationConfigurationV1 != nil {
		return utils.MarshalJSON(u.IntegrationConfigurationV1, "", true)
	}

	if u.IntegrationConfigurationV2 != nil {
		return utils.MarshalJSON(u.IntegrationConfigurationV2, "", true)
	}

	return nil, errors.New("could not marshal union type MappingConfiguration: all fields are null")
}

// MappingSimulationRequestFormat - Format of the payload data
type MappingSimulationRequestFormat string

const (
	MappingSimulationRequestFormatJSON MappingSimulationRequestFormat = "json"
	MappingSimulationRequestFormatXML  MappingSimulationRequestFormat = "xml"
)

func (e MappingSimulationRequestFormat) ToPointer() *MappingSimulationRequestFormat {
	return &e
}
func (e *MappingSimulationRequestFormat) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "json":
		fallthrough
	case "xml":
		*e = MappingSimulationRequestFormat(v)
		return nil
	default:
		return fmt.Errorf("invalid value for MappingSimulationRequestFormat: %v", v)
	}
}

type MappingSimulationRequestPayloadType string

const (
	MappingSimulationRequestPayloadTypeStr      MappingSimulationRequestPayloadType = "str"
	MappingSimulationRequestPayloadTypeMapOfAny MappingSimulationRequestPayloadType = "mapOfAny"
)

// MappingSimulationRequestPayload - The object data payload - can be either a serialized string or a direct JSON object
type MappingSimulationRequestPayload struct {
	Str      *string        `queryParam:"inline" name:"payload"`
	MapOfAny map[string]any `queryParam:"inline" name:"payload"`

	Type MappingSimulationRequestPayloadType
}

func CreateMappingSimulationRequestPayloadStr(str string) MappingSimulationRequestPayload {
	typ := MappingSimulationRequestPayloadTypeStr

	return MappingSimulationRequestPayload{
		Str:  &str,
		Type: typ,
	}
}

func CreateMappingSimulationRequestPayloadMapOfAny(mapOfAny map[string]any) MappingSimulationRequestPayload {
	typ := MappingSimulationRequestPayloadTypeMapOfAny

	return MappingSimulationRequestPayload{
		MapOfAny: mapOfAny,
		Type:     typ,
	}
}

func (u *MappingSimulationRequestPayload) UnmarshalJSON(data []byte) error {

	var str string = ""
	if err := utils.UnmarshalJSON(data, &str, "", true, nil); err == nil {
		u.Str = &str
		u.Type = MappingSimulationRequestPayloadTypeStr
		return nil
	}

	var mapOfAny map[string]any = map[string]any{}
	if err := utils.UnmarshalJSON(data, &mapOfAny, "", true, nil); err == nil {
		u.MapOfAny = mapOfAny
		u.Type = MappingSimulationRequestPayloadTypeMapOfAny
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for MappingSimulationRequestPayload", string(data))
}

func (u MappingSimulationRequestPayload) MarshalJSON() ([]byte, error) {
	if u.Str != nil {
		return utils.MarshalJSON(u.Str, "", true)
	}

	if u.MapOfAny != nil {
		return utils.MarshalJSON(u.MapOfAny, "", true)
	}

	return nil, errors.New("could not marshal union type MappingSimulationRequestPayload: all fields are null")
}

type MappingSimulationRequest struct {
	MappingConfiguration MappingConfiguration `json:"mapping_configuration"`
	// Type of the object/event being mapped.
	// For v1.0: must match a key in mapping_configuration.mapping.objects
	// For v2.0: must match a key in mapping_configuration.mapping.events
	//
	ObjectType string `json:"object_type"`
	// Format of the payload data
	Format *MappingSimulationRequestFormat `default:"json" json:"format"`
	// The object data payload - can be either a serialized string or a direct JSON object
	Payload MappingSimulationRequestPayload `json:"payload"`
}

func (m MappingSimulationRequest) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(m, "", false)
}

func (m *MappingSimulationRequest) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &m, "", false, []string{"mapping_configuration", "object_type", "payload"}); err != nil {
		return err
	}
	return nil
}

func (o *MappingSimulationRequest) GetMappingConfiguration() MappingConfiguration {
	if o == nil {
		return MappingConfiguration{}
	}
	return o.MappingConfiguration
}

func (o *MappingSimulationRequest) GetObjectType() string {
	if o == nil {
		return ""
	}
	return o.ObjectType
}

func (o *MappingSimulationRequest) GetFormat() *MappingSimulationRequestFormat {
	if o == nil {
		return nil
	}
	return o.Format
}

func (o *MappingSimulationRequest) GetPayload() MappingSimulationRequestPayload {
	if o == nil {
		return MappingSimulationRequestPayload{}
	}
	return o.Payload
}
